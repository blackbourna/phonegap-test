<html>
<head>
	<title>My PhoneGap App</title>
	<script src="phonegap.js"></script>
	<script src="vibration.js"></script>
	<script src="device-motion.js"></script>
	<script src="dialogs.js"></script>
	<script src="battery-status.js"></script>
	<script src="jquery.js"></script>
	<script>
		alert('Alert from "alert" dialog');
		var stopAccelerometer = false;

		function onDeviceReady() {
		    // vibrate
		    //navigator.notification.vibrate(2000);

		    // beep
		    //navigator.notification.beep(2);

		    // get battery status
			
			// check battery
		    //window.addEventListener("batterystatus", function() {
			//	alert("Battery Status - Level: " + info.level + " isPlugged: " + info.isPlugged);
			//}, function(e) { alert(e); });
		}
		
		 // Start watching the acceleration
		function startWatch() {
		    watchID = navigator.accelerometer.watchAcceleration(
		        //success handler
		        function (acceleration) {
					alert(acceleration);
		        },
		        // error handler
		        function () {
		            // do nothing
		        },
		        // options
		        {
		            // Update acceleration every 3 seconds
		            frequency: 3000
		        });
		}

		 // Stop watching the acceleration
		 //
		function stopWatch() {
		    if (watchID) {
		        navigator.accelerometer.clearWatch(watchID);
		        watchID = null;
		    } else {
				startWatch();
			}
		}

		// take a photo
		function takePhoto() {
			alert('Attempt to take photo');
			navigator.camera.getPicture( function(data) {
				alert('took a photo!');
				var image = document.getElementById("photo");
				image.src = data;
			}, function(e) { alert(e); }, 
			{ quality: 50 } );
		}
		
		function spinPhoto() {
			var x = 0;
			while (x < 360) {
				setTimeout(function() {
					rotatePhoto(x);
				},
					5000/x
				);
			}
		}
		
		function rotatePhoto(angle) {
			// caching the object for performance reasons
			var $elem = $('img');

			// we use a pseudo object for the animation
			// (starts from `0` to `angle`), you can name it as you want
			$({deg: 0}).animate({deg: angle}, {
				duration: 2000,
				step: function(now) {
					// in the step-callback (that is fired each step of the animation),
					// you can use the `now` paramter which contains the current
					// animation-position (`0` up to `angle`)
					$elem.css({
						transform: 'rotate(' + now + 'deg)'
					});
				}
			});
		}
		
		function go() {
		    document.addEventListener("deviceready", onDeviceReady, false);
		}
	</script>
	<style>
		img { width: 100%;}
	</style>
</head>

<body onload="go()">
<button onclick="stopWatch()">Toggle Acceleration Monitoring</button>
<button onclick="takePhoto()">Take Photo</button>
<button onclick="spinPhoto()">Spin Photo</button>
<img id="photo" src="" />
</body>
</html>
